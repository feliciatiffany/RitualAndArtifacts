<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=800, height=400, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Elevator Bet Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=20260222">
</head>
<body>
    <div id="game-viewport">
    <!-- ==================== SCREEN 1: START ==================== -->
    <div id="start-screen" class="screen active" onclick="startGame()">
        <div class="start-bg">
            <button class="ranking-link" onclick="event.stopPropagation(); showRankingPopup();">RANKING</button>
            <div class="start-text">
                <p class="comic-subtitle start-subtitle">CLICK TO CONTINUE!</p>
            </div>
        </div>
    </div>

    <!-- ==================== RANKING POPUP (QR + countdown only) ==================== -->
    <div id="ranking-popup" class="ranking-popup" onclick="closeRankingPopup(event)">
        <div class="ranking-popup-inner" onclick="event.stopPropagation()">
            <img src="images/ranking-qr.png" alt="" class="ranking-popup-img">
            <div class="ranking-popup-countdown" id="ranking-countdown">10</div>
        </div>
    </div>

    <!-- ==================== SCREEN 2: ASK NAME ==================== -->
    <div id="name-screen" class="screen">
        <div class="name-bg">
            <button class="back-btn name-back-btn" onclick="goBack('name')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
            <div class="name-content">
                <input type="text" id="player-name" class="name-input" placeholder="Enter your name" maxlength="20" oninput="filterNameSuggestions(); hideNameWarning();" autocomplete="off">
                <div id="name-warning" class="name-warning" style="display:none;"></div>
                <div id="name-suggestions" class="name-suggestions" style="display:none;"></div>
            </div>
            <button class="next-btn" onclick="submitName()">NEXT &rsaquo;&rsaquo;&rsaquo;</button>
        </div>
    </div>

    <!-- ==================== SCREEN 3: MAKE YOUR BET ==================== -->
    <div id="bet-screen" class="screen">
        <div class="bet-bg">
            <!-- Speed lines -->
            <div class="speed-lines">
                <svg viewBox="0 0 800 480" xmlns="http://www.w3.org/2000/svg">
                    <line x1="400" y1="100" x2="0" y2="0" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="50" y2="80" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="0" y2="150" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="0" y2="250" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="0" y2="350" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="0" y2="480" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="100" y2="480" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="200" y2="480" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="300" y2="480" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="400" y2="480" stroke="rgba(255,255,255,0.08)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="500" y2="480" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="600" y2="480" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="700" y2="480" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="800" y2="480" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="800" y2="350" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="800" y2="250" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="800" y2="150" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="800" y2="50" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="800" y2="0" stroke="rgba(255,255,255,0.15)" stroke-width="1.5"/>
                    <line x1="400" y1="100" x2="650" y2="0" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="550" y2="0" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="250" y2="0" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                    <line x1="400" y1="100" x2="150" y2="0" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
                </svg>
            </div>
            <h1 class="comic-title bet-title">MAKE YOUR BET!</h1>
            <div class="elevator-doors">
                <div class="elevator-door" onclick="selectElevator(1)">
                    <span class="elevator-num">1</span>
                    <img src="images/elevator-1.png" alt="E1" class="elevator-img">
                </div>
                <div class="elevator-door" onclick="selectElevator(2)">
                    <span class="elevator-num">2</span>
                    <img src="images/elevator-2.png" alt="E2" class="elevator-img">
                </div>
                <div class="elevator-door" onclick="selectElevator(3)">
                    <span class="elevator-num">3</span>
                    <img src="images/elevator-3.png" alt="E3" class="elevator-img">
                </div>
                <div class="elevator-door" onclick="selectElevator(4)">
                    <span class="elevator-num">4</span>
                    <img src="images/elevator-4.png" alt="E4" class="elevator-img">
                </div>
            </div>
            <button class="back-btn bet-back-btn" onclick="goBack('bet')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
        </div>
    </div>

    <!-- ==================== IDLE OVERLAY ==================== -->
    <div id="idle-overlay" class="idle-overlay" onclick="dismissIdle()">
        <div class="idle-countdown" id="idle-countdown"></div>
    </div>

    <!-- ==================== IDLE OVERLAY (bets active) ==================== -->
    <div id="idle-betting-overlay" class="idle-overlay" onclick="dismissIdleBetting()">
        <div class="idle-countdown" id="idle-betting-countdown"></div>
    </div>

    <!-- ==================== CONFIRM SCREENS (one per elevator) ==================== -->
    <div id="confirm1-screen" class="screen">
        <div class="confirm-bg confirm-bg-1">
            <div class="confirm-content">
                <button class="yes-btn" onclick="confirmStep(1)">YES</button>
            </div>
            <button class="back-btn" onclick="goBack('confirm1')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
        </div>
    </div>
    <div id="confirm2-screen" class="screen">
        <div class="confirm-bg confirm-bg-2">
            <div class="confirm-content">
                <button class="yes-btn" onclick="confirmStep(2)">YES</button>
            </div>
            <button class="back-btn" onclick="goBack('confirm2')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
        </div>
    </div>
    <div id="confirm3-screen" class="screen">
        <div class="confirm-bg confirm-bg-3">
            <div class="confirm-content">
                <button class="yes-btn" onclick="confirmStep(3)">YES</button>
            </div>
            <button class="back-btn" onclick="goBack('confirm3')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
        </div>
    </div>
    <div id="confirm4-screen" class="screen">
        <div class="confirm-bg confirm-bg-4">
            <div class="confirm-content">
                <button class="yes-btn" onclick="confirmStep(4)">YES</button>
            </div>
            <button class="back-btn" onclick="goBack('confirm4')">&lsaquo;&lsaquo;&lsaquo; BACK</button>
        </div>
    </div>

    <!-- ==================== TRANSITION SCREEN (Confirm â†’ Thanks) ==================== -->
    <div id="transition-screen" class="screen">
        <div class="transition-bg">
            <div class="transition-burst"></div>
            <img id="transition-elevator-img" class="transition-elevator-img" src="images/transition-1.png" alt="">
            <div class="transition-pow">BET PLACED!</div>
        </div>
    </div>

    <!-- ==================== SCREEN 7: THANKS FOR BETTING ==================== -->
    <div id="thanks-screen" class="screen">
        <div class="thanks-bg" onclick="proceedFromThanks()">
            <!-- Merged background (red + starburst + text in one image) -->
            <div class="thanks-img-layer"></div>
            <!-- Surrounding stars (not in bg image) - with dynamic effects -->
            <svg class="thanks-star thanks-star-1" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-2" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-3" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-4" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-5" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-6" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-7" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-8" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-9" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
            <svg class="thanks-star thanks-star-10" viewBox="0 0 24 24"><polygon points="12,2 14,9 22,9 16,14 18,22 12,17 6,22 8,14 2,9 10,9"/></svg>
        </div>
    </div>

    <!-- ==================== SCREEN 7.5: WAITING FOR ELEVATOR (WHO'S BETTING?!) ==================== -->
    <div id="waiting-screen" class="screen">
        <div class="waiting-bg">
            <button id="waiting-back-btn" class="waiting-back-btn" onclick="resetGame()" style="display:none;">&lsaquo;&lsaquo;&lsaquo; BACK</button>
            <div class="waiting-content">
                <div class="waiting-count-wrap">
                    <p class="waiting-count" id="waiting-count">1 PLAYER BETTING</p>
                </div>
                <button class="join-btn" onclick="startGame()">JOIN BET?</button>
            </div>
        </div>
    </div>

    <!-- ==================== SCREEN 8: RESULTS ==================== -->
    <div id="results-screen" class="screen">
        <div class="results-bg">
            <div class="results-overlay">
                <h1 class="comic-title results-title">RESULTS!</h1>
                <div id="results-content" class="results-content-area"></div>
            </div>
            <button class="see-more-btn results-reset-btn" onclick="resetGame()">PLAY AGAIN &rsaquo;&rsaquo;&rsaquo;</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- BGM Music Manager -->
    <script src="bgm/music-manager.js"></script>
    
    <!-- Main Script -->
    <script src="app.js?v=20260217"></script>
    </div>
</body>
</html>
